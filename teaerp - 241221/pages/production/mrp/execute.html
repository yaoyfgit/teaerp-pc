<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MRP运算执行 - TeaERP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../../../css/common.css">
    <link rel="stylesheet" href="../../../css/layout.css">
    <link rel="stylesheet" href="../../../css/modules/production.css">
</head>
<body>
    <div class="app-container">
        <div class="app-sidebar"></div>
        <main class="app-content">
            <div class="breadcrumb">
                <span>生产管理</span>
                <span class="separator">/</span>
                <span>MRP运算管理</span>
                <span class="separator">/</span>
                <span>运算执行</span>
            </div>

            <!-- 需求收集 -->
            <div class="card">
                <div class="card-header">
                    <h3>需求收集</h3>
                </div>
                <div class="card-body">
                    <div class="demand-section">
                        <h4>销售订单需求</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>订单编号</th>
                                    <th>产品</th>
                                    <th>数量</th>
                                    <th>交期</th>
                                    <th>优先级</th>
                                    <th>客户等级</th>
                                </tr>
                            </thead>
                            <tbody id="orderDemandTable"></tbody>
                        </table>
                    </div>

                    <div class="demand-section">
                        <h4>预测需求</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>产品</th>
                                    <th>预测数量</th>
                                    <th>预测类型</th>
                                    <th>预测周期</th>
                                </tr>
                            </thead>
                            <tbody id="forecastDemandTable"></tbody>
                        </table>
                    </div>

                    <div class="demand-section">
                        <h4>安全库存需求</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>产品</th>
                                    <th>当前库存</th>
                                    <th>最小库存</th>
                                    <th>最大库存</th>
                                    <th>补货点</th>
                                    <th>补货量</th>
                                </tr>
                            </thead>
                            <tbody id="safetyStockTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 库存核查 -->
            <div class="card">
                <div class="card-header">
                    <h3>库存核查</h3>
                </div>
                <div class="card-body">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>物料编码</th>
                                <th>物料名称</th>
                                <th>现有库存</th>
                                <th>在途库存</th>
                                <th>安全库存</th>
                                <th>预留库存</th>
                                <th>可用库存</th>
                            </tr>
                        </thead>
                        <tbody id="stockCheckTable"></tbody>
                    </table>
                </div>
            </div>

            <!-- 需求分解 -->
            <div class="card">
                <div class="card-header">
                    <h3>需求分解</h3>
                </div>
                <div class="card-body">
                    <div class="bom-tree" id="bomTree"></div>
                </div>
            </div>

            <!-- 计划生成 -->
            <div class="card">
                <div class="card-header">
                    <h3>计划生成</h3>
                </div>
                <div class="card-body">
                    <div class="plan-section">
                        <h4>生产计划</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>产品</th>
                                    <th>计划数量</th>
                                    <th>开始时间</th>
                                    <th>结束时间</th>
                                    <th>生产车间</th>
                                    <th>工位</th>
                                </tr>
                            </thead>
                            <tbody id="productionPlanTable"></tbody>
                        </table>
                    </div>

                    <div class="plan-section">
                        <h4>采购计划</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>物料</th>
                                    <th>采购数量</th>
                                    <th>建议供应商</th>
                                    <th>采购周期</th>
                                    <th>预计到货</th>
                                </tr>
                            </thead>
                            <tbody id="purchasePlanTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button class="button" onclick="saveDraft()">保存草稿</button>
                <button class="button primary" onclick="executeMRP()">执行运算</button>
            </div>
        </main>
    </div>

    <script src="../../../js/common.js"></script>
    <script src="../../../js/modules/production/mrp-execute.js"></script>
</body>
</html> 